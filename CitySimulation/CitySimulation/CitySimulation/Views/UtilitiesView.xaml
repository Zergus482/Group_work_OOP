<UserControl x:Class="CitySimulation.Views.UtilitiesView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             Background="#F8F9FA">

    <Grid Margin="20">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*"/>
            <ColumnDefinition Width="300"/>
        </Grid.ColumnDefinitions>

        <!-- Основная информация -->
        <StackPanel Grid.Column="0" Margin="0,0,20,0">
            <TextBlock Text="🏠 Система коммунальных услуг (ЖКХ)" 
                      FontSize="24" FontWeight="Bold" Foreground="#2B2D42" 
                      Margin="0,0,0,20"/>

            <!-- Статус -->
            <Border Background="#6A9FB5" Padding="15" CornerRadius="8" Margin="0,0,0,15">
                <TextBlock x:Name="StatusText" Text="Готов к работе" 
                          Foreground="White" FontSize="14" FontWeight="SemiBold"
                          TextWrapping="Wrap"/>
            </Border>

            <!-- Список зданий -->
            <TextBlock Text="🏢 Жилые здания:" FontSize="16" FontWeight="Bold" 
                      Foreground="#2B2D42" Margin="0,0,0,10"/>

            <ListView x:Name="BuildingsList" 
                     Background="White" BorderThickness="1" BorderBrush="#DEE2E6"
                     Height="150" SelectionChanged="BuildingsList_SelectionChanged">
                <ListView.View>
                    <GridView>
                        <GridViewColumn Header="Адрес" Width="150" DisplayMemberBinding="{Binding Address}"/>
                        <GridViewColumn Header="Жители" Width="80" DisplayMemberBinding="{Binding Residents}"/>
                        <GridViewColumn Header="Услуги" Width="100" DisplayMemberBinding="{Binding UtilitiesStatus}"/>
                    </GridView>
                </ListView.View>
            </ListView>

            <!-- Добавление нового здания -->
            <GroupBox Header="➕ Добавить новое здание" Margin="0,10,0,0"
                     BorderBrush="#DEE2E6" Background="White" Foreground="#2B2D42">
                <StackPanel Margin="10">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>

                        <StackPanel Grid.Column="0" Margin="0,0,10,0">
                            <TextBlock Text="Адрес:" FontWeight="SemiBold" Margin="0,0,0,5"/>
                            <TextBox x:Name="NewBuildingAddress" Text="ул. Новая, 1" 
                                    Background="White" BorderBrush="#DEE2E6" BorderThickness="1"/>
                        </StackPanel>

                        <StackPanel Grid.Column="1" Margin="0,0,10,0">
                            <TextBlock Text="Количество жителей:" FontWeight="SemiBold" Margin="0,0,0,5"/>
                            <TextBox x:Name="NewBuildingResidents" Text="50" 
                                    Background="White" BorderBrush="#DEE2E6" BorderThickness="1"/>
                        </StackPanel>

                        <Button Grid.Column="2" Content="➕ Добавить" Click="AddNewBuilding_Click"
                                Background="#6A9FB5" Foreground="White" FontWeight="SemiBold"
                                BorderThickness="0" Padding="15,8" VerticalAlignment="Bottom"
                                Margin="0,0,0,5"/>
                    </Grid>
                </StackPanel>
            </GroupBox>

            <!-- Управление -->
            <GroupBox Header="⚙️ Управление коммунальными услугами" Margin="0,15,0,0"
                     BorderBrush="#DEE2E6" Background="White" Foreground="#2B2D42">
                <StackPanel Margin="10">
                    <TextBlock x:Name="SelectedBuildingAddress" Text="Выберите здание" 
                              FontWeight="Bold" FontSize="14"
                              Foreground="#2B2D42" Margin="0,0,0,10"/>

                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>

                        <Button Content="🔌 Подключить" Click="ConnectUtilities_Click"
                                Grid.Column="0" Margin="5" Background="#6A9FB5" 
                                Foreground="White" FontWeight="SemiBold"
                                BorderThickness="0"/>
                        <Button Content="👥 + Жители" Click="UpdateResidents_Click"
                                Grid.Column="1" Margin="5" Background="#6A9FB5" 
                                Foreground="White" FontWeight="SemiBold"
                                BorderThickness="0"/>
                        <Button Content="🔧 Обслуживание" Click="PerformMaintenance_Click"
                                Grid.Column="2" Margin="5" Background="#95A5A6" 
                                Foreground="White" FontWeight="SemiBold"
                                BorderThickness="0"/>
                        <Button Content="🗑️ Удалить" Click="DeleteBuilding_Click"
                                Grid.Column="3" Margin="5" Background="#E74C3C" 
                                Foreground="White" FontWeight="SemiBold"
                                BorderThickness="0"/>
                    </Grid>

                    <Button Content="💰 Пополнить бюджет +$50,000" Click="AddBudget_Click"
                            Margin="5,10,5,5" Background="#7E8AA2" 
                            Foreground="White" FontWeight="Bold" FontSize="12"
                            Height="35" BorderThickness="0"/>
                </StackPanel>
            </GroupBox>
        </StackPanel>

        <!-- Боковая панель -->
        <StackPanel Grid.Column="1">
            <!-- Статус службы ЖКХ -->
            <GroupBox Header="🏢 Городская служба ЖКХ" Margin="0,0,0,15"
                     BorderBrush="#DEE2E6" Background="White" Foreground="#2B2D42">
                <StackPanel Margin="10">
                    <TextBlock x:Name="ServiceName" Text="Городская служба ЖКХ" FontWeight="Bold" Foreground="#2B2D42"/>
                    <TextBlock x:Name="BudgetText" Text="Бюджет: $100000.00" 
                              Foreground="#6A9FB5" Margin="0,5,0,10"
                              FontWeight="SemiBold"/>

                    <TextBlock Text="📊 Статус сетей:" FontWeight="SemiBold" Margin="0,0,0,5"
                              Foreground="#2B2D42"/>
                    <TextBox x:Name="NetworkStatusText" Text="Загрузка..." 
                            Height="120" IsReadOnly="True" 
                            TextWrapping="Wrap" VerticalScrollBarVisibility="Auto"
                            Background="#F8F9F9" BorderThickness="1" BorderBrush="#DEE2E6"
                            FontFamily="Consolas" FontSize="10" Foreground="#495057"/>
                </StackPanel>
            </GroupBox>

            <!-- Потребление выбранного здания -->
            <GroupBox Header="📈 Потребление выбранного здания" 
                     BorderBrush="#DEE2E6" Background="White" Foreground="#2B2D42">
                <StackPanel Margin="10">
                    <TextBlock x:Name="BuildingAddress" Text="Выберите здание" 
                              FontWeight="Bold" Margin="0,0,0,10"
                              Foreground="#2B2D42" TextWrapping="Wrap"/>

                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>

                        <StackPanel Grid.Row="0" Orientation="Horizontal" Margin="0,0,0,8">
                            <TextBlock Text="⚡ Электричество:" Width="130" Foreground="#6C757D"/>
                            <TextBlock x:Name="ElectricityText" Text="0.00 кВт" 
                                      Foreground="#6A9FB5" FontWeight="SemiBold"/>
                        </StackPanel>

                        <StackPanel Grid.Row="1" Orientation="Horizontal" Margin="0,0,0,8">
                            <TextBlock Text="💧 Вода:" Width="130" Foreground="#6C757D"/>
                            <TextBlock x:Name="WaterText" Text="0.00 м³" 
                                      Foreground="#6A9FB5" FontWeight="SemiBold"/>
                        </StackPanel>

                        <StackPanel Grid.Row="2" Orientation="Horizontal" Margin="0,0,0,8">
                            <TextBlock Text="🔥 Газ:" Width="130" Foreground="#6C757D"/>
                            <TextBlock x:Name="GasText" Text="0.00 м³" 
                                      Foreground="#6A9FB5" FontWeight="SemiBold"/>
                        </StackPanel>

                        <StackPanel Grid.Row="3" Orientation="Horizontal">
                            <TextBlock Text="🚰 Сточные воды:" Width="130" Foreground="#6C757D"/>
                            <TextBlock x:Name="SewageText" Text="0.00 м³" 
                                      Foreground="#6A9FB5" FontWeight="SemiBold"/>
                        </StackPanel>
                    </Grid>
                </StackPanel>
            </GroupBox>
        </StackPanel>
    </Grid>
</UserControl>